{% extends "base.html" %}

{% block meta %}
<meta name="author" content="{{ article.author.name }}" />
<meta name="description" content="{{ article.summary|striptags|escape }}" />
<meta name="keywords" content="{{ article.tags|join(', ')|escape }}">

{% include "partial/og_article.html" %}
{% endblock %}

{% block title %} &ndash; {{ article.title|striptags|escape }}{% endblock %}

{% block content %}
<article class="single">
  <header>
    {% if not ARTICLE_HIDE_TRANSLATION %}
      {% import 'partial/translations.html' as translations with context %}
      {{ translations.translations_for(article) }}
    {% endif %}
    <h1 id="{{ article.slug }}">{{ article.title }}</h1>
    <p>
      {{ _('发表于 %(when)s 分类: %(category)s',
           when=article.locale_date,
           category='<a href="%s/%s">%s</a>'|format(SITEURL, article.category.url, article.category)|safe) }}

      <span id="busuanzi_container_page_pv">
        &#8226; 阅读 <span id="busuanzi_value_page_pv"></span>次
      </span>
      {% if 'post_stats' in PLUGINS %}
        &#8226; 阅读时间 {{ article.stats['read_mins'] }}分钟
      {% endif %}
    </p>
  </header>

  <div>
    {{ article.content }}
  </div>
  <div class="tag-cloud">
    <p>
      {% if article.tags %}
      {% for tag in article.tags %}
      <a href="{{ SITEURL }}/{{ tag.url }}">{{ tag }}</a>
      {% endfor %}
      {% endif %}
    </p>
  </div>

  {% if ADD_THIS_ID %}
  <div class="center social-share">
    <p>{{ _('Like this article? Share it with your friends!') }}</p>
    <div class="addthis_native_toolbox"></div>
    <div class="addthis_sharing_toolbox"></div>
    <div class="addthis_inline_share_toolbox"></div>
  </div>
  {% endif %}

  {% include "partial/neighbors.html" %}

  {% if article.related_posts %}
  <div class="related-posts">
    <h4>{{ _('You might enjoy') }}</h4>
    <ul class="related-posts">
    {% for related_post in article.related_posts %}
      <li><a href="{{ SITEURL }}/{{ related_post.url }}">{{ related_post.title }}</a></li>
    {% endfor %}
    </ul>
  </div>
  {% elif ADD_THIS_ID %}
    <div class="addthis_relatedposts_inline"></div>
  {% endif %}

  <script data-isso="/isso/"
          data-isso-css="true"
          data-isso-lang="en"
          data-isso-reply-to-self="false"
          data-isso-require-author="false"
          data-isso-require-email="false"
          data-isso-max-comments-top="10"
          data-isso-max-comments-nested="5"
          data-isso-reveal-on-click="5"
          data-isso-avatar="true"
          data-isso-avatar-bg="#f0f0f0"
          data-isso-avatar-fg="#9abf88 #5698c4 #e279a3 #9163b6 ..."
          data-isso-vote="true"
          data-vote-levels=""
          src="//shenzhongqiang.com/isso/js/embed.min.js"></script>
  <section id="isso-thread"></section>

</article>
{% endblock %}
